# Created 2021-06-04 Пт 07:27
#+TITLE: Org-roam full-text search
#+AUTHOR: Renat Galimov
* Full-text search                                                    :table:
:DEADLINE: <2021-06-04 Пт>

- Requested features:
  - helm or counsel integration.
  - live search.
  - result previewing support.
  - a key-binding to capture results into currently clocked org
    file.
  - results ordering support
    - Headlines
    - Summary
    - Hightlight
  - large file-sets support

#+caption: Full text search engines features
#+begin: columnview :hlines 1 :id local :maxlevel 2 :indent t
| ITEM                  | FRONTEND | SPEED | SORT |
|-----------------------+----------+-------+------|
| Full-text search      |          |       |      |
| \_  ripgrep (helm-rg) | helm ivy | fast  | nil  |
| \_  helm-org-rifle    | helm     | slow  | t    |
| \_  deft              | helm     | fast  | nil  |
| \_  org-ql            | helm     | slow  |      |
| \_  recoll            | helm ivy | fast  | nil  |
| \_  org-agenda search |          |       |      |
| \_  org-fts           | ivy      | fast  |      |
#+end:

** ripgrep (helm-rg)
[[https://github.com/cosmicexplorer/helm-rg][GitHub - cosmicexplorer/helm-rg: ripgrep is nice]]
Now I use it as a default text search engine.

** helm-org-rifle
[[https://github.com/alphapapa/org-rifle][GitHub - alphapapa/org-rifle: Rifle through your Org-mode buffers and acquire your target]]

This one is good. It gives you an idea about the context. But it's not ordering the data by the highlights.
=(helm-org-rifle-directories org-roam-directory)=

I find org-rifle too slow at the moment. But its output is exacly what I want.
** deft
[[https://github.com/dfeich/helm-deft][GitHub - dfeich/helm-deft: A helm based emacs module to help search in a predetermined list of directories. Inspired by the deft module.]]

I use helm implementation. Speed is fast enough.

** org-ql
[[https://github.com/alphapapa/org-ql][GitHub - alphapapa/org-ql: An Org-mode query language, including search commands and saved views]]

Doesn't look suitable for large filesets.

** recoll
[[https://github.com/emacs-helm/helm-recoll][GitHub - emacs-helm/helm-recoll: helm interface for the recoll desktop search tool.]]
I found recoll being to hard to set up.
I wasn't able to get it working on MacOS.

** org-fts
[[https://github.com/zot/microfts/tree/main/elisp][microfts/elisp at main · zot/microfts · GitHub]]

- It didn't work on MacOS from scratch.
- I tried to compile its binary manually but that didn't work
  either.
- This one looks promising. Let's keep an eye on it.

** org-agenda search
- Not trying this for now because agenda wants to open all its
  files for search.
